---
- include_vars: "{{ item }}"
  with_first_found:
    - "vars/{{ ansible_distribution }}-{{ ansible_distribution_major_version }}.yml"
    - "vars/{{ ansible_distrubition }}.yml"
    - "vars/{{ ansible_os_family }}.yml"
    - "vars/default.yml"
  when: vim_packages is not defined
  tags:
    - vim

- name: install vim alternative
  alternatives: >
    name=editor 
    path=/usr/bin/vim.nox
  become: yes
  when: 
    ansible_os_family == "Debian"
  tags:
    - vim

- name: install vim packages
  package: name={{ item }} state=latest
  with_items:
    - "{{ vim_packages }}"
  become: yes
  tags:
    - vim

- name: create vim plugin directory
  file: >
    path="~/{{ vim_plugins }}"
    state=directory
  become: no
  tags:
    - vim
    - vimrc

- name: install vim neobundle
  git: >
    repo=https://github.com/Shougo/neobundle.vim 
    dest="~/{{ vim_plugins }}/neobundle.vim"
  become: no
  tags:
    - vim
    - vimrc

- name: install vimrc
  template: >
    src=vimrc
    dest="~/{{ vim_conf }}"
  become: no
  tags:
    - vim
    - vimrc
