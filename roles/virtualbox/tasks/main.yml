---
- name: install virtualbox apt package
  apt: >
    name={{ item }} 
    state=latest
  with_items:
    - virtualbox
  become: yes
  when: 
    ansible_os_family == "Debian"

- name: install virtualbox yum repo
  copy: >
    src=virtualbox.repo
    dest=/etc/yum.repos.d
  become: yes
  when: 
    ansible_os_family == "RedHat"

- name: install virtualbox repo key
  rpm_key: >
    state=present
    key=https://www.virtualbox.org/download/oracle_vbox.asc
  become: yes
  when: 
    ansible_os_family == "RedHat"

- name: install virtualbox yum package
  yum: >
    name={{ item }}
    state=latest
  with_items:
    - VirtualBox-5.0
  become: yes
  when: 
    ansible_os_family == "RedHat"

- name: install virtualbox arch package
  yum: >
    name={{ item }}
    state=latest
  with_items:
    - virtualbox
  become: yes
  when: 
    ansible_os_family == "Archlinux"
