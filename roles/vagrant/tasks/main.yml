---
- include_vars: "{{ item }}"
  with_first_found:
    - "vars/{{ ansible_distribution }}-{{ ansible_distribution_major_version }}.yml"
    - "vars/{{ ansible_distrubition }}.yml"
    - "vars/{{ ansible_os_family }}.yml"
    - "vars/default.yml"
  when: vagrant_packages is not defined
  tags:
    - vagrant

- name: download vagrant yum package
  get_url: >
    dest=/tmp/vagrant.rpm
    url=https://releases.hashicorp.com/vagrant/1.8.1/vagrant_1.8.1_x86_64.rpm
  when:
    ansible_os_family == "RedHat" 
  become: yes
  tags:
    - vagrant

- name: install vagrant yum package
  yum: >
    name=/tmp/vagrant.rpm
  when:
    ansible_os_family == "RedHat" 
  become: yes
  tags:
    - vagrant
    
- name: install vagrant package
  package: >
    name={{ item }} 
    state=latest
  with_items:
    - "{{ vagrant_packages }}"
  when:
    ansible_os_family != "RedHat"
  become: yes
  tags:
    - vagrant

- include: plugins.yml
