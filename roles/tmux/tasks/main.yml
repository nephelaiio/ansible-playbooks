---
- include_vars: "{{ item }}"
  with_first_found:
    - "vars/{{ ansible_distribution }}-{{ ansible_distribution_major_version }}.yml"
    - "vars/{{ ansible_distrubition }}.yml"
    - "vars/{{ ansible_os_family }}.yml"
    - "vars/default.yml"
  when: tmux_pacakges is not defined

- name: install tmux package
  package: >
    name={{ item }} 
    state=latest
  with_items:
    - "{{ tmux_packages }}"
  become: yes
  tags:
    - tmux

- name: create tmux plugin directory
  file: >
    path="~/{{ tmux_plugins }}"
    state=directory
  become: yes
  tags:
    - tmux
    - tmux.conf

- name: install tmux plugin manager 
  git: >
    repo=https://github.com/tmux-plugins/tpm.git
    dest="~/{{ tmux_plugins }}/tpm"
  tags:
    - tmux
    - tmux.conf

- name: tmux 2.0 configuration file
  template:
    src=tmux_20.conf
    dest="~/{{ tmux_conf_20 }}"
  tags:
    - tmux
    - tmux.conf

- name: tmux 2.1 configuration file
  template:
    src=tmux_21.conf
    dest="~/{{ tmux_conf_21 }}"
  tags:
    - tmux
    - tmux.conf

- name: tmux main configuration file
  template:
    src=tmux.conf
    dest="~/{{ tmux_conf }}"
  tags:
    - tmux
    - tmux.conf
