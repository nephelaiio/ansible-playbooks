---
foreman_repositories_version: 1.23
foreman_installer_options:
  - "--enable-foreman"
  - "--enable-foreman-cli"
  - "--enable-foreman-cli-ansible"
  - "--enable-foreman-compute-libvirt"
  - "--enable-foreman-compute-ovirt"
  - "--enable-foreman-plugin-templates"
  - "--enable-foreman-plugin-cockpit"
  - "--enable-foreman-plugin-discovery"
  - "--foreman-foreman-url {{ foreman_url }}"
  - "--foreman-configure-epel-repo true"
  - "--foreman-configure-scl-repo true"
  - "--foreman-db-adapter postgresql"
  - "--foreman-db-database {{ foreman_db_name }}"
  - "--foreman-db-host localhost"
  - "--foreman-db-manage true"
  - "--foreman-db-manage-rake true"
  - "--foreman-db-username {{ foreman_db_user }}"
  - "--foreman-db-password {{ foreman_db_pass }}"
  - "--foreman-initial-admin-username {{ foreman_admin_user }}"
  - "--foreman-initial-admin-password {{ foreman_admin_pass }}"
  - "--puppet-autosign true"
  - "--puppet-autosign-entries '*.{{base_domain}}'"
  - "--enable-foreman-proxy"
  - "--foreman-proxy-bmc false"
  - "--foreman-proxy-dhcp false"
  - "--foreman-proxy-dns false"
  - "--foreman-proxy-http false"
  - "--foreman-proxy-logs false"
  - "--foreman-proxy-puppet true"
  - "--foreman-proxy-tftp false"
  - "--foreman-oauth-active true"
  - "--foreman-oauth-consumer-key {{ foreman_oauth_consumer_key }}"
  - "--foreman-oauth-consumer-secret {{ foreman_oauth_consumer_secret }}"
  - "--foreman-proxy-oauth-consumer-key {{ foreman_oauth_consumer_key }}"
  - "--foreman-proxy-oauth-consumer-secret {{ foreman_oauth_consumer_secret }}"
  - "--foreman-server-ssl-ca {{ foreman_server_ssl_ca }}"
  - "--foreman-server-ssl-cert {{ foreman_server_ssl_cert }}"
  - "--foreman-server-ssl-key {{ foreman_server_ssl_key }}"
  - "--foreman-proxy-ssl-ca {{ foreman_proxy_ssl_ca }}"
  - "--foreman-proxy-ssl-cert {{ foreman_proxy_ssl_cert }}"
  - "--foreman-proxy-ssl-key {{ foreman_proxy_ssl_key }}"

foreman_db_name: foreman
foreman_db_user: foreman
foreman_db_pass: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  31303435643031656335653463613337383337363030393135343561613131303232326236373137
  6566646535396631316132326262646139616565326333340a623764373531326663323037353966
  63626365623331303463323737633030353237376533633537396661303762343131666663656238
  3339656630613863630a366366383935616131356436346333656136396264396437613734613366
  39343838333938396537663933383835623661643736616332633062383837616639
foreman_api_user: "{{ foreman_admin_user }}"
foreman_api_pass: "{{ foreman_admin_pass }}"

foreman_ldap_domain: "{{ base_domain }}"
foreman_ldap_host: "{{ groups['ipa_server'] | first }}"
foreman_ldap_user_base: cn=users,cn=accounts,dc=ipa,dc=home,dc=nephelai,dc=io
foreman_ldap_group_base: cn=groups,cn=accounts,dc=ipa,dc=home,dc=nephelai,dc=io
foreman_ldap_cn: "uid={{ foreman_ldap_user }},{{ foreman_ldap_user_base }}"
foreman_ldap_user: "foreman"
foreman_ldap_pass: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  61653535653735326535303961333362633965366536346234316239386565323365636263333434
  6162383966633763656364613166363235323436353966640a366335623532326137353439666661
  35643066313061623436306265386430383939363634303333373939353838393866353630343139
  3365393031613030640a333238326433313165376461306630396430363766663832643462393735
  64313633376466633035303434336432663666393239306263383536363533346662

foreman_ldap_admin_group: foreman_admins
foreman_ldap_users_group: foreman_users

ipa_users:
  - user_name: "{{ foreman_ldap_user }}"
    first_name: Foreman
    last_name: Bind
    pass: "{{ foreman_ldap_pass }}"

ipa_groups:
  - name: "{{ foreman_ldap_admin_group }}"
  - name: "{{ foreman_ldap_users_group }}"
