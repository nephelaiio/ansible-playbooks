---
foreman_release: 1.24
foreman_url: "https://foreman.{{ base_domain }}"
foreman_admin_user: admin
foreman_admin_pass: !vault |
  $ANSIBLE_VAULT;1.2;AES256;home
  32366363386462653561336365323562363932613165346161623336336637386465626537623434
  3238343032326530386232346430363637613862366538370a393235366663663336656639643665
  62323065626436383431323965633337306334633133366163366233643833636339393664303732
  3034613963363435360a643631333136646139643835366535653431666233333964636639626462
  63393536356433626462393137313134653138643333343966393031353230636662
foreman_installer_admin_user: "{{ foreman_admin_user }}"
foreman_installer_admin_password: "{{ foreman_admin_pass }}"
foreman_oauth_consumer_key: installer_key
foreman_oauth_consumer_secret: legsLONDONMATCHstory
foreman_server_ssl_ca: /etc/puppetlabs/puppet/ssl/certs/ca.pem
foreman_server_ssl_cert: "/etc/puppetlabs/puppet/ssl/certs/{{ inventory_hostname }}.pem"
foreman_server_ssl_key: "/etc/puppetlabs/puppet/ssl/private_keys/{{ inventory_hostname
  }}.pem"
foreman_proxy_ssl_ca: "{{ foreman_server_ssl_ca }}"
foreman_proxy_ssl_cert: "{{ foreman_server_ssl_cert }}"
foreman_proxy_ssl_key: "{{ foreman_server_ssl_key }}"
puppet_agent_server: "{{ groups['foreman_app'] | map('extract', hostvars, ['inventory_hostname'])
  | first }}"
foreman_organizations:
- Default Organization
foreman_locations:
- Default Location
foreman_ptables:
- name: Kickstart custom
  layout: |
    <%#
    kind: ptable
    name: Kickstart custom
    model: Ptable
    oses:
    - CentOS
    - Fedora
    - RedHat
    %>
    <%
      partitioning_disk = host_param('install-disk') ? '--drives=' + host_param('install-disk') : ''
    -%>
    zerombr
    clearpart <%= partitioning_disk %> --initlabel --all
    autopart
  os_family: Redhat
foreman_os:
- name: Ubuntu
  family: Debian
  architectures:
  - x86_64
  major: 18.04
  release_name: bionic
  ptables:
  - "Preseed default"
  provisioning_templates:
  - "Preseed default"
  - "Preseed default finish"
  - "Preseed default PXELinux"
  media:
  - Ubuntu mirror
  password_hash: SHA512
- name: CentOS
  family: Redhat
  architecture: x86_64
  major: 7
  ptables:
  - "Kickstart default"
  provisioning_templates:
  - "Kickstart default"
  - "Kickstart default finish"
  - "Kickstart default PXELinux"
  media:
  - CentOS mirror
  password_hash: SHA512
foreman_subnet_pxe: "{{ nets.pxe.network }}/{{ nets.pxe.netmask }}"
foreman_proxy: "{{ groups['foreman_proxy'] | first }}"
foreman_server: "{{ groups['foreman_app'] | first }}"
foreman_environments:
- name: production
  locations: "{{ foreman_locations }}"
  organizations: "{{ foreman_organizations }}"
foreman_hostgroups:
- name: bionic
  architectures:
  - x86_64
  operatingsystem: Ubuntu 18.04
  media: Ubuntu mirror
  pxe_loader: PXELinux BIOS
  subnet: "{{ foreman_subnet_pxe | ipaddr('network') }}/{{ foreman_subnet_pxe | ipaddr('prefix')
    }}"
  domain: "{{ base_domain }}"
  root_pass: "{{ users.root.password  | password_hash('sha512') }}"
  organizations: "{{ foreman_organizations }}"
  locations: "{{ foreman_locations }}"
  ptable: "Preseed default"
  environment: production
  puppet_proxy: "{{ foreman_server }}"
  puppet_ca_proxy: "{{ foreman_server }}"
  openscap_proxy: "{{ foreman_proxy }}"
  parameters:
  - name: partitioning-method
    value: lvm
  - name: remote_execution_ssh_user
    value: root
  - name: remote_execution_ssh_keys
    value: "{{ users.teddyphreak.pubkey }}"
  - name: remote_execution_create_user
    value: true
  - name: partitioning-vg-name
    value: ubuntu
  - name: additional-packages
    value: python python3
- name: centos7
  architecture: x86_64
  operatingsystem: CentOS 7
  media: CentOS mirror
  pxe_loader: PXELinux BIOS
  subnet: "{{ foreman_subnet_pxe | ipaddr('network') }}/{{ foreman_subnet_pxe | ipaddr('prefix')
    }}"
  domain: "{{ base_domain }}"
  root_pass: "{{ users.root.password  | password_hash('sha512') }}"
  organizations: "{{ foreman_organizations }}"
  locations: "{{ foreman_locations }}"
  environment: production
  ptable: "Kickstart custom"
  puppet_proxy: "{{ foreman_server }}"
  puppet_ca_proxy: "{{ foreman_server }}"
  openscap_proxy: "{{ foreman_proxy }}"
  parameters:
  - name: selinux-mode
    value: disabled
  - name: disable-firewall
    value: true
    parameter_type: boolean
  - name: enable-epel
    value: false
    parameter_type: boolean
  - name: remote_execution_ssh_user
    value: "{{ users.teddyphreak.username }}"
  - name: remote_execution_ssh_keys
    value: "{{ users.teddyphreak.pubkey }}"
  - name: remote_execution_create_user
    value: true
  - name: remote_execution_effective_user_method
    value: sudo
  - name: install-disk
    value: /dev/nvme0n1
  - name: additional-packages
    value: python python3
