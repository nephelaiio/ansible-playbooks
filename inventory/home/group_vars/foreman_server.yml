---
foreman_url: "https://foreman.{{ base_domain }}"
foreman_admin_pass: !vault |
  $ANSIBLE_VAULT;1.2;AES256;home
  35663138333633316636663563653934316436346234646631383662386664663933663637363162
  3137633966373235393065333235363830643865646562630a616638303766376335393230353165
  66363863653461343662326662356465326264663631303139653062346165343662353662353832
  3234633865323334610a356235653362663437623166393435643965316565363833623862363831
  35366166323934383662373666643466376334323961656231643736303863393839
foreman_db_pass: !vault |
  $ANSIBLE_VAULT;1.2;AES256;home
  64356630353438376536623332646233376565316363313636646236386230623034613863356363
  6537653530336138376263633138623965636332393438380a366131306239626334623664363065
  37336361313432623562363562633735663139376637353236343139383437323135633037653862
  3866626534666638370a306537343431343864383933386236643466353738656230623936386230
  38376265613438366232653761326431353366353464633636663136383539623964386463353634
  6637656633346438393134613461393436366561333262386334
foreman_oauth_consumer_key: installer_key
foreman_oauth_consumer_secret: !vault |
  $ANSIBLE_VAULT;1.2;AES256;home
  33303834333062336363323266363530363661353166643135646430353763353066393062373637
  3230386436626135313231616236393764386434393861630a356161636233653134373165633264
  31343438303230666165626535366563666435613233613337613839363334393861363566646264
  3036303436666635370a343762663031356630633437306164316239386461343164363561373862
  66653963383966336436653639333663363038383134646563376561353737343563
foreman_installer_extra_options:
  - "--puppet-autosign true"
  - "--puppet-autosign-entries '*.{{ base_domain }}'"
  - "--enable-foreman-proxy"
  - "--foreman-proxy-puppet true"
  - "--foreman-oauth-active true"
  - "--foreman-oauth-consumer-key {{ foreman_oauth_consumer_key }}"
  - "--foreman-oauth-consumer-secret {{ foreman_oauth_consumer_secret }}"
  - "--foreman-server-ssl-cert {{ acme_certificate_certfile }}"
  - "--foreman-server-ssl-chain {{ acme_certificate_chainfile }}"
  - "--foreman-server-ssl-key {{ acme_certificate_keyfile }}"
  - "--foreman-proxy-ssl-ca /etc/puppetlabs/puppet/ssl/certs/ca.pem"
  - "--foreman-proxy-ssl-cert /etc/puppetlabs/puppet/ssl/certs/{{ inventory_hostname }}.pem"
  - "--foreman-proxy-ssl-key /etc/puppetlabs/puppet/ssl/private_keys/{{ inventory_hostname }}.pem"
  - "--foreman-proxy-oauth-consumer-key {{ foreman_oauth_consumer_key }}"
  - "--foreman-proxy-oauth-consumer-key {{ foreman_oauth_consumer_key }}"
  - "--foreman-proxy-oauth-consumer-secret {{ foreman_oauth_consumer_secret }}"
  - "--foreman-proxy-foreman-base-url {{ foreman_url }}"

acme_certificate_domain: "{{ foreman_url | urlsplit('hostname') }}"
acme_certificate_certfile: "/etc/httpd/{{ foreman_url | urlsplit('hostname') }}.crt"
acme_certificate_chainfile: "/etc/httpd/{{ foreman_url | urlsplit('hostname') }}.chain.crt"
acme_certificate_keyfile: "/etc/httpd/{{ foreman_url | urlsplit('hostname') }}.key"
acme_certificate_group_members:
  - nginx
