---
timezone: America/Costa_Rica

kolla_release: 5.0.0.0rc1
kolla_installer: resources/kolla

awx_release: 1.0.0
awx_installer: resources/awx
awx_url: http://awx.home.nephelai.io

servers:
  dhcp: "{{ groups['dhcp'] | map('extract', hostvars, ['ansible_host']) | list }}"
  recursors: "{{ groups['recursors'] | map('extract', hostvars, ['ansible_host']) | list }}"
  dns: "{{ groups['pdns'] | map('extract', hostvars, ['ansible_host']) | list }}"

apt_url: http://apt.home.nephelai.io

nets:
  home:
    network: 192.168.0.0
    netmask: 255.255.255.0
    router: 192.168.0.1
    zone: 0.168.192.in-addr.arpa
    ns: "{{ servers.recursors }}"
    pools:
      - range: '192.168.0.65 192.168.0.127'
    reservations:
      cerberus:
        host: "{{ hostvars['cerberus']['ansible_hostname'] }}"
        ip-address: "{{ hostvars['cerberus']['ansible_host'] }}"
        hw-address: "{{ hostvars['cerberus']['hw_address'] }}"
      rpia:
        host: "{{ hostvars['rpia']['ansible_hostname'] }}"
        ip-address: "{{ hostvars['rpia']['ansible_host'] }}"
        hw-address: "{{ hostvars['rpia']['hw_address'] }}"
      rpib:
        host: "{{ hostvars['rpib']['ansible_hostname'] }}"
        ip-address: "{{ hostvars['rpib']['ansible_host'] }}"
        hw-address: "{{ hostvars['rpib']['hw_address'] }}"
      rpic:
        host: "{{ hostvars['rpic']['ansible_hostname'] }}"
        ip-address: "{{ hostvars['rpic']['ansible_host'] }}"
        hw-address: "{{ hostvars['rpic']['hw_address'] }}"
      rpid:
        host: "{{ hostvars['rpid']['ansible_hostname'] }}"
        ip-address: "{{ hostvars['rpid']['ansible_host'] }}"
        hw-address: "{{ hostvars['rpid']['hw_address'] }}"
      rpie:
        host: "{{ hostvars['rpie']['ansible_hostname'] }}"
        ip-address: "{{ hostvars['rpie']['ansible_host'] }}"
        hw-address: "{{ hostvars['rpie']['hw_address'] }}"
      nuca:
        host: "{{ hostvars['nuca']['ansible_hostname'] }}"
        ip-address: "{{ hostvars['nuca']['ansible_host'] }}"
        hw-address: "{{ hostvars['nuca']['hw_address'] }}"
  private:
    network: 192.168.254.0
    netmask: 255.255.255.0
    router: 192.168.254.1
    ns: "{{ servers.recursors }}"
    pools:
      - range: '192.168.254.65 192.168.254.127'
    reservations:
      kvma:
        host: "{{ hostvars['kvma']['ansible_hostname'] }}"
        ip-address: "{{ hostvars['kvma']['ansible_host'] }}"
        hw-address: "{{ hostvars['kvma']['hw_address'] }}"
      kvmb:
        host: "{{ hostvars['kvmb']['ansible_hostname'] }}"
        ip-address: "{{ hostvars['kvmb']['ansible_host'] }}"
        hw-address: "{{ hostvars['kvmb']['hw_address'] }}"
      kvmc:
        host: "{{ hostvars['kvmc']['ansible_hostname'] }}"
        ip-address: "{{ hostvars['kvmc']['ansible_host'] }}"
        hw-address: "{{ hostvars['kvmc']['hw_address'] }}"

dns:
  zones:
    home:
      name: home.nephelai.io
      hostmaster: master@home.nephelai.io
      mx:
        - name: rpia.home.nephelai.io
      ns:
        - name: rpic.home.nephelai.io
      records: "{{ nets.home.reservations.values() }}"
      cnames:
        home.nephelai.io: rpia.home.nephelai.io
        unifi.home.nephelai.io: "{{ groups['unifi'] | map('extract', hostvars, ['ansible_hostname']) | list | first }}"
        nfs.home.nephelai.io: "{{ groups['backup'] | map('extract', hostvars, ['ansible_hostname']) | list | first }}"
        apt.home.nephelai.io: "{{ groups['mirror'] | map('extract', hostvars, ['ansible_hostname']) | list | first }}"
    emoh:
      name: "{{ nets.home.zone }}"
      hostmaster: master@home.nephelai.io
      ns:
        - name: rpic.home.nephelai.io
      mx: []
      records: "{{ nets.home.reservations.values() | map('reverse_record') | list }}"
      cnames: []
