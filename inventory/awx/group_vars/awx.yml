---
awx_ci_user: ci
awx_ci_pass: !vault |
  $ANSIBLE_VAULT;1.2;AES256;home
  62306663316330363666636435636337653932356231306439393464626661313333386437646435
  3666333536343465393163656537623937303739373835390a353334343736306165323031393364
  32646433613937343434326337623761346134616536316666306663326638613239336539373732
  6436366365323633310a363836643730376561643664303938343435343465623464636639356232
  37623133336466316337343931323364623965646535326232316663346562653261
awx_ci_email: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  36316161313130373131656231356263356539343238313437363537623331623964313035666665
  3931663437316633623765663166303036663461636432650a663164643932616238363564323263
  65386530643363323133366162616561303834333364303463653630306465326162336136653736
  3764626331353034660a626164343532623461393938633465656530653865336433363236333239
  61326530373831316336646138613638656566306531373461333634316536383062
awx_admin_pass: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  38326437383561303736613837343736396238303031653035363861656139663364326635643361
  3036623232343863343639333135363830343431383137350a646530386137653536363632366263
  38393163666636346335383832373162663761646164323332306365363834383332353030356661
  3539336136633562650a303563306264386132363432313661333835653330373539383866616635
  6561
awx_secret_key: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  63363435626262373830366530333236363730666131623236303137323933636661313838383034
  3330663031393036343666336131653764303633313438310a316662666332653338363933636165
  37613031626266656434633032306534633965626365663064376632383338326665323565653731
  6461373166346366360a323138666432333738383965373464643333356561333636323431626166
  66346663373539326534613665366334633432643830333236306233373061366435
awx_host_key: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  66346565313831663761313939383638633134333838613563373336396438316364306634656564
  3366633336636131313837336433326331613434663234660a613565373966393432363430353162
  66363237363134616234356165663961386264383931366564343062353831653633616665336139
  3738306462363131320a643837393533333335396665663935323361306332356666373466323934
  30393032653933643862633038336565633561303862323936336439653232323464303764623164
  3731353562616236663932316435326138653532666231323164
awx_pg_pass: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  64643935323165383633343735653962613837363439336264383162323735373065323631363038
  6634306535376531663962333865396137336263306166360a396536666462326236383532383339
  33393233653464623230393832633465376164373762313532613932663065613638663730343339
  6636663631363039390a316237366131646438653963646532633564363165623565613036656164
  65666438363832613065396565636139663031616531343165666363643134353430
awx_vault_awx_pass: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  66616633663061313038353939363661663839316431353133663561383665623961353338343530
  6432366262316231376533393362656234616333326464610a356236356434386539316533653235
  37386239653932386139376134626662306331343233373936353566613165643036366666326532
  6139373733323333300a636165343838643137346161356366646433393062383338646233303666
  3663
awx_rabbitmq_pass: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  61386430613038316235653034333963333734316665643033353564376661303236383339623866
  3730623036343365366630303136363435353764316139340a393530313161303965366365366264
  63643734343265386434653830383337663933623963613832613339613933343761333131316661
  6538356164373139650a343938363465383238373862643136373062396236383130646133303335
  34646538386363643138396162333664353230333065393338393131316635663362
awx_github_user: teddyphreak
awx_github_pass: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  63626136643237376161363063363330633535353437636131616361653961356634343464616563
  3364306363663562383330326530643437643666333932370a393465343332353534333233663365
  34343132313934363862306636356233336133343765383639613430333038386239373161653861
  3165393266346438390a393433613038323334393437373861383133393565656235626139383630
  3332
awx_machine_user: teddyphreak
awx_machine_key: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  32626163343064346665633135656235336364613932336632393438353561663934336563376331
  3535333734643765376665363939623833663733646464320a376339633566316565313633363138
  35386632363635356237363732663437653165333632613036303737336361336161383838313036
  6464656331383339310a316439396631333065623965316439313438313834373338623366666133
  31326331333065623737313761663936386630613737656538653464353166636562376432366631
  65633961646135373261626133333364343630633631393435646361316231376434376430393031
  33323462396236346664306536656666316564333066633562633134616564356234616665323564
  65633236323530373862643662343662613439346666393433643533366336373639333366363834
  63363537626663396166666236393563636564393431666539376261393337306664373338306533
  61303561623733613161653933386432306138373034373162613333303061316637396638656333
  63623231376133313762653232353032666438626134323434336563643265626166623331623966
  32353838393766656335653663323734663663333536303863393033366439356335313436363836
  64353261666538633861343862316431343264653562643333306161326262336566646230353832
  65333462333763393032363862653334616365363632376564343133393738623831306139613766
  63376463306463353835653833396561653137353561623732316639303163373338396133386132
  65353061646465316437646666663064643232653964613965323065373236643734303035373766
  32616534613863366531666565643935643937303766613134643437616366643234653463343465
  38656435623033643432643637613763373534613262396136343564356131343934363266643631
  65323636383763386235363233396132356533636464633265643333646233313731346330643436
  66326234653132633135636366366135616434353136376562623531343833313961326666353333
  65373537623863313537383565633066353762366131373135613166386436653564396338333536
  39616338626163303264366139626561396463663331646334653138353261636437616333303630
  39646631343230383535656336313161633664316134323861613635323633653834623737613665
  37316433633465333031643138383661343265613861363633316363633039376234656165663736
  65626466363762393132363835363232623635666337346236356138346461653864303438643666
  66396264303461623632653463653430366261613237383632323237653934656538373238383030
  33666532303035636264316466633239333931663363376561613962306635323133366339373563
  34616630343662616461623363323134396263653136636562363334653836303066393538633462
  36363866613866643861336132373736383533313434613866366137663834656631353539623930
  65616665333561356534396666373963626131363261393135313732613935373930613036306561
  63353266333737663565366630383265633739376137353635323562646632313265633464323762
  37623764343039613333646166343033316464316232396164623362623034376166376165313730
  34366263336666356264366561323665616366396431393339616563323232333834363031306532
  31653336323934653861663731323330366466633136646664613666383266336435396561386366
  32316263626633326263346563613462353561303863303138393037353238303265663831656662
  63613132646663383634643965386430636561653431393235373638373332623532313332656261
  30303235393434666466313634383536393862366465646330336539623266613330643665643432
  30306264356139323537626365303238386137643464393138643263383565323163373130383264
  39346466633336643636613163656230326537623066633436663563333431333661373539386336
  31396366343030343330306332326230656431643864333665643465373935396132303737626131
  65363964383530323066636134646565306530623362323162623736643533386564366665306336
  39646662333161613066336565333864646465356436653965393466663737383538333864656530
  35363232353466393337333964646463666664316663393234323732633130356431656135386235
  33666638393265343731303739356130313563393235636632313837643735323831356237303033
  39616161333332333665333161333662613662616231653130336264373437623166343762303834
  31653139323430323938623363396635313634396130366361643730343933343639396437333536
  62366362343935383231333438613439323765633463376338393436613963396232363837393033
  31646438613332326432323533326333313538663439306362646138663433643332333935353937
  66363164373335373532343338626238353533633934373965346537386133646464633739383662
  64636233373236356634303663323534303037626566633966643363396439656363313364626564
  32623662663736313631313937663533616565393838636134333661303563643036373836393763
  32633435346638343636663033663333343965326363636461666664653930613333633638363562
  38363062663937336664633832326333333532666565366665323132373662326430373238346631
  31366263363264386336663431636664373836323838336665643730636164386236646133353264
  66313134653335393265343461363536336631373139373165633136616530373933376464626634
  65376134353837623733643533646334323763613864353435656562366664353166613765363936
  37616364373463616462383061663561323735336366626438383239613432623135336230336232
  66613436326334383562656363323435643430383863376537643161653761313138393235316431
  62646235666264373837616364666637326465626262313832323432313863326638326632343639
  37313033383237623535653733303333303838626565393233373233633738653937393232656334
  61366436633137323530643964353635663432383233386164363734393266626262396131353639
  30386235623337326136623365386139613966323265643634336539303034383932303434623862
  61313462653631383332653762353031616138363330666330663931336437303433383939363033
  34373761346234383730373130393564626232376636396462353838323836613231316238306131
  33316264326536303636666336613830323036653266336235353339386262643065653362323162
  31333539346462376235323338313830303638303764626337383230663865323436653435336533
  63646135333961633061633138386231323835313038366437643832666166643731333133616436
  34373064393838393030353165326661336261653237623131313261326565373663336166346435
  36623463363537643937646161386331623437653533616238396238306232373465663265323536
  33613434663638643566313033643562633330333236396639373034623836353661326530633937
  37636233326632633463343065313061343232356634336334663735333266356563366336633637
  39396638653338363637333666323833383132643732633634323866656135343431393762373031
  61366334343661366633346166326235363539353530306466333138653437353130353165643865
  65333162303533613965336237643361333039653365396536356261336362393364343132303733
  62333466643766643365613135626664383234313263326533356539653233313837666335323235
  62623432656234393136323765633630616134646531313065383264316364633262396235636532
  32343731303163353130313539376533653137393533343239363836636435326435313165373761
  38633339356435383632303438623937653530333464373438373165616535653661356636356364
  34633833383730356533613865303939633336316362323166623661396336646435623036663635
  61373931393138386538653334383338343664646531373038366138366432373535643139366639
  31323163666464333030313430393739366339633932383237396338623231623266393663343032
  36353662326134373733353461343332363362333164656131346339623066343862633661346463
  64333130666537663531616265356638633137653436656531626364363138333331386661323239
  66313735646538623131353533663461663236343733303331393331663838646433303232623262
  62613337636665373032343333373534356139356162316465363532306263343965323435616638
  31366630636432333064646435613634356337356239623066373230343130666635633361313935
  61643038623366626235656566623865326665353930613766633465346134323833323433613965
  66306363376666396665

awx_users:
  - first_name: CI
    last_name: Integration
    username: "{{ awx_ci_user }}"
    password: "{{ awx_ci_pass }}"
    email: "{{ awx_ci_email }}"
    superuser: yes

awx_templates:

  - name: Demo Job Template
    state: absent
  - name: awx.ping
    state: absent
    job_type: run
    project: awx
    inventory: awx
    playbook: ping.yml
    credentials:
      - name: home.ssh
        kind: ssh
  - name: awx.configure
    job_type: run
    project: awx
    inventory: awx
    playbook: configure.yml
    credentials:
      - name: home.ssh
        kind: ssh
      - name: home.vault
        kind: vault
  - name: awx.proxy
    job_type: run
    project: awx
    inventory: awx
    playbook: nginx.yml
    credentials:
      - name: home.ssh
        kind: ssh
      - name: home.vault
        kind: vault
  - name: freeipa.install.servers
    job_type: run
    project: playbooks
    inventory: freeipa
    playbook: freeipa/server.yml
    credentials:
      - name: home.ssh
        kind: ssh
      - name: home.vault
        kind: vault
  - name: freeipa.install.replicas
    job_type: run
    project: playbooks
    inventory: freeipa
    playbook: freeipa/replicas.yml
    credentials:
      - name: home.ssh
        kind: ssh
      - name: home.vault
        kind: vault
  - name: freeipa.install.client
    state: absent
    job_type: run
    project: playbooks
    playbook: freeipa/clients.yml
    credentials:
      - name: home.ssh
        kind: ssh
      - name: home.vault
        kind: vault
  - name: freeipa.install.clients
    job_type: run
    project: playbooks
    playbook: freeipa/clients.yml
    credentials:
      - name: home.ssh
        kind: ssh
      - name: home.vault
        kind: vault
  - name: pdns.recursors
    job_type: run
    project: pdns
    playbook: recursor.yml
    inventory: pdns
    credentials:
      - name: home.ssh
        kind: ssh
      - name: home.vault
        kind: vault
  - name: pdns.servers
    job_type: run
    project: pdns
    playbook: server.yml
    inventory: pdns
    credentials:
      - name: home.ssh
        kind: ssh
      - name: home.vault
        kind: vault
  - name: pdns.records
    job_type: run
    project: pdns
    playbook: records.yml
    inventory: pdns
    credentials:
      - name: home.ssh
        kind: ssh
      - name: home.vault
        kind: vault
  - name: pdns.register
    job_type: run
    project: pdns
    playbook: register.yml
    inventory: pdns
    credentials:
      - name: home.ssh
        kind: ssh
      - name: home.vault
        kind: vault

awx_schedules:

  - name: awx.proxy
    job_template: awx.proxy
    enabled: true
    rrule: "DTSTART:20190705T002000Z RRULE:FREQ=WEEKLY;INTERVAL=2"

awx_organizations:

  - name: Demo Organization
    state: absent

  - name: nephelai.io
    state: present

    credentials:

      - name: awx.github
        kind: scm
        username: "{{ awx_github_user }}"
        password: "{{ awx_github_pass }}"
      - name: home.vault
        kind: vault
        vault_password: "{{ awx_vault_awx_pass }}"
      - name: home.ssh
        kind: ssh
        username: "{{ awx_machine_user }}"
        ssh_key_data: "{{ awx_machine_key }}"

    projects:

      - name: Demo Project
        state: absent
      - name: awx
        scm_type: git
        scm_url: https://github.com/nephelaiio/ansible-playbooks-awx.git
        scm_branch: master
        scm_delete_on_update: false
        scm_credential: awx.github
        scm_update_on_launch: false
        scm_update_cache_timeout: 60
        scm_clean: false
      - name: pdns
        scm_type: git
        scm_url: https://github.com/nephelaiio/ansible-playbooks-pdns.git
        scm_branch: master
        scm_delete_on_update: false
        scm_credential: awx.github
        scm_update_on_launch: false
        scm_update_cache_timeout: 60
        scm_clean: false
      - name: freeipa
        state: absent
        scm_type: git
        scm_url: https://github.com/freeipa/ansible-freeipa.git
        scm_branch: master
        scm_delete_on_update: false
        scm_credential: awx.github
        scm_update_on_launch: true
        scm_update_cache_timeout: 60
        scm_clean: false
      - name: inventory
        scm_type: git
        scm_url: https://github.com/nephelaiio/ansible-playbooks.git
        scm_branch: master
        scm_delete_on_update: false
        scm_credential: awx.github
        scm_update_on_launch: false
        scm_update_cache_timeout: 60
        scm_clean: false
      - name: playbooks
        scm_type: git
        scm_url: https://github.com/nephelaiio/ansible-playbooks.git
        scm_branch: master
        scm_delete_on_update: false
        scm_credential: awx.github
        scm_update_on_launch: false
        scm_update_cache_timeout: 60
        scm_clean: false

    inventories:

      - name: Demo Inventory
        state: absent
      - name: awx
        source: scm
        source_project: inventory
        source_path: inventory/awx
        overwrite: true
        overwrite_vars: true
        update_on_launch: false
        update_on_project_update: true
      - name: freeipa
        source: scm
        source_project: inventory
        source_path: inventory/freeipa
        overwrite: true
        overwrite_vars: true
        update_on_launch: false
        update_on_project_update: true
      - name: pdns
        source: scm
        source_project: inventory
        source_path: inventory/pdns
        overwrite: true
        overwrite_vars: true
        update_on_launch: false
        update_on_project_update: true

    workflows:
      - name: site
        nodes:
          - name: pdns.recursors
            id: pdns.recursors
            template: pdns.recursors
          - name: pdns.servers
            id: pdns.servers
            template: pdns.servers
            parent: pdns.recursors
          - name: pdns.records
            id: pdns.records
            template: pdns.records
            parent: pdns.servers
          - name: pdns.register
            id: pdns.register
            template: pdns.register
            parent: pdns.records
          - name: freeipa.servers
            id: freeipa.servers
            template: freeipa.install.servers
          - name: freeipa.replicas
            id: pdns.recursors
            template: freeipa.install.replicas
            parent: freeipa.servers
          - name: awx.proxy
            id: awx.proxy
            template: awx.proxy
          - name: awx.configure
            id: awx.configure
            template: awx.configure
            parent: awx.proxy
      - name: pdns
        nodes:
          - name: pdns.recursors
            id: pdns.recursors
            template: pdns.recursors
          - name: pdns.servers
            id: pdns.servers
            template: pdns.servers
            parent: pdns.recursors
          - name: pdns.records
            id: pdns.records
            template: pdns.records
            parent: pdns.servers
          - name: pdns.register
            id: pdns.register
            template: pdns.register
            parent: pdns.records
      - name: freeipa
        nodes:
          - name: freeipa.servers
            id: freeipa.servers
            template: freeipa.install.servers
          - name: freeipa.replicas
            id: freeipa.replicas
            template: freeipa.install.replicas
            parent: freeipa.servers
      - name: awx
        nodes:
          - name: awx.proxy
            id: awx.proxy
            template: awx.proxy
          - name: awx.configure
            id: awx.configure
            template: awx.configure
            parent: awx.proxy
