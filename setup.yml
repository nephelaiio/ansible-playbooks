---
- name: Install profile prerequisites

  hosts: localhost

  tasks:

    - name: Run ansible galaxy
      command: ansible-galaxy install -r requirements.yml -p galaxy/ --force

    - name: Pull kolla repository
      git:
        repo: https://github.com/openstack/kolla.git
        dest: "{{ kolla_installer }}"
        version: "{{ kolla_release | default('HEAD') }}"

    - name: Pull awx playbook repository
      git:
        repo: https://github.com/ansible/awx.git
        dest: "{{ awx_installer }}"
        version: "{{ awx_releae | default('HEAD') }}"
