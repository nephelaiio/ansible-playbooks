---
foreman_organizations:
  nephelai:
    name: nephelai
foreman_locations:
  home:
    name: home
    organization: "{{ foreman_organizations.nephelai.name }}"
foreman_media:
  ubuntu:
    name: Ubuntu home mirror
    path: "{{ ubuntu_url }}/{{ ubuntu_mirror_dir }}"
    os_family: Debian
    foreman_organizations:
      - "{{ foreman_organizations.nephelai.name }}"
    foreman_locations:
      - "{{ foreman_locations.home.name }}"
  centos:
    name: CentOS home mirror
    path: "{{ centos_url }}/{{ centos_mirror_dir }}/$version/os/$arch"
    os_family: Redhat
    foreman_organizations:
      - "{{ foreman_organizations.nephelai.name }}"
    foreman_locations:
      - "{{ foreman_locations.home.name }}"
foreman_os:
  bionic:
    name: Ubuntu
    architecture: x86_64
    major: 18.04
    release_name: bionic
    provisioning_templates:
      - "Preseed default"
      - "Preseed default finish"
      - "Preseed default PXELinux"
    ptable: "Preseed default"
    medium: "{{ foreman_media.ubuntu.name }}"
    password_hash: SHA512
  centos7:
    name: CentOS
    architecture: x86_64
    major: 7
    provisioning_templates:
      - "Kickstart default"
      - "Kickstart default finish"
      - "Kickstart default PXELinux"
    ptable: "Kickstart default"
    medium: "{{ foreman_media.centos.name }}"
    password_hash: SHA512
foreman_hostgroups:
  bionic:
    name: Ubuntu Bionic
    architecture: x86_64
    operatingsystem: "{{ foreman_os.bionic.name }}"
    medium: "{{ foreman_os.bionic.medium }}"
    pxe_loader: PXELinux BIOS
    subnet: "{{ nets.management.network }}/{{ nets.management.netmask }}"
    domain: "{{ base_domain }}"
    root_pass: "{{ users.root.password  | password_hash(foreman_os.bionic.password_hash | lower) }}"
    foreman_organizations:
      - "{{ foreman_organizations.nephelai.name }}"
    foreman_locations:
      - "{{ foreman_locations.home.name }}"
    group_parameters_attributes:
      - name: remote_execution_ssh_user
        value: "{{ users.teddyphreak.username }}"
      - name: remote_execution_ssh_keys
        value: "{{ users.teddyphreak.pubkey }}"
      - name: remote_execution_create_user
        value: true
      - name: remote_execution_effective_user_method
        value: sudo
  centos7:
    name: CentOS7
    architecture: x86_64
    operatingsystem: "{{ foreman_os.centos7.name }}"
    medium: "{{ foreman_os.centos7.medium }}"
    pxe_loader: PXELinux BIOS
    subnet: "{{ nets.management.network }}/{{ nets.management.netmask }}"
    domain: "{{ base_domain }}"
    root_pass: "{{ users.root.password  | password_hash(foreman_os.centos7.password_hash | lower) }}"
    foreman_organizations:
      - "{{ foreman_organizations.nephelai.name }}"
    foreman_locations:
      - "{{ foreman_locations.home.name }}"
    group_parameters_attributes:
      - name: selinux-mode
        value: disabled
      - name: disable-firewall
        value: true
      - name: enable-epel
        value: false
      - name: remote_execution_ssh_user
        value: "{{ users.teddyphreak.username }}"
      - name: remote_execution_ssh_keys
        value: "{{ users.teddyphreak.pubkey }}"
      - name: remote_execution_create_user
        value: true
      - name: remote_execution_effective_user_method
        value: sudo
foreman_domains: "{{ dns.zones.values() | list }}"
foreman_networks: "{{ nets.values() | list | selectattr('foreman_proxy', 'defined') | list }}" 
