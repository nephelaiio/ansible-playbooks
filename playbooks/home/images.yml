---
- name: Create nuc images

  hosts: localhost

  vars:
    ubuntu_release_xenial: "16.04.3"
    ubuntu_release_aartful: "17.10"
    ubuntu_timezone: America/Costa_Rica
    ubuntu_hosts:
      - host: nuca.home.nephelai.io
        interface:
          static: false # true | false
        disk: /dev/nvme0n1
        release: "{{ ubuntu_release_xenial }}"

  tasks:

    - include: ../images/ubuntu.yml
      static: no
      vars:
        ubuntu_host: "{{ item.host }}"
        ubuntu_interface: "{{ item.interface }}"
        ubuntu_disk: "{{ item.disk }}"
        ubuntu_release: "{{ item.release }}"
      with_items: "{{ ubuntu_hosts }}"


- name: Create raspbian images

  hosts: localhost

  vars:
    raspbian_release: https://downloads.raspberrypi.org/raspbian_lite_latest
    rasbian_timezone: America/Costa_Rica
    raspbian_hosts:
      - hostname: rpia.home.nephelai.io
        ifaces:
          - name: eth0
            method: static
            address: 192.168.0.10
            netmask: 255.255.255.0
            gateway: 192.168.0.1
      - hostname: rpib.home.nephelai.io
        ifaces:
          - name: eth0
            method: static
            address: 192.168.0.9
            netmask: 255.255.255.0
            gateway: 192.168.0.1
      - hostname: rpic.home.nephelai.io
        ifaces:
          - name: eth0
            method: dhcp
      - hostname: rpid.home.nephelai.io
        ifaces:
          - name: eth0
            method: dhcp
      - hostname: rpie.home.nephelai.io
        ifaces:
          - name: eth0
            method: dhcp

  tasks:

    - include: ../images/raspbian.yml
      static: no
      vars:
        raspbian_host: "{{ item.hostname }}"
        raspbian_ifaces: "{{ item.ifaces }}"
      with_items: "{{ raspbian_hosts }}"
