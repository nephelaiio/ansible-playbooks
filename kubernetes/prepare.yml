---
- name: Install project prerequisites

  hosts: localhost

  connection: local

  tasks:

    - name: clone kubespray repository
      git:
        repo: https://github.com/kubernetes-incubator/kubespray.git
        version: "{{ kubespray_version }}"
        dest: "{{ kubespray_root }}"
        force: yes

    - name: clone rook repository
      git:
        repo: https://github.com/rook/rook.git
        version: "{{ rook_version }}"
        dest: "{{ rook_root }}"
        force: yes

    - name: install kubespray requirements
      pip:
        requirements: "{{ playbook_dir }}/{{ kubespray_root }}/requirements.txt"
